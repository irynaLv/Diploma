["function _a56ae6b3a62bd348572b99886ae755dec0394192(){};var DL=DL||{};if(!DL.controller){DL.controller={}}if(!DL.model){DL.model={}}if(!DL.store){DL.store={}}",69,573763,"model.Documents\",Ext.data.Model,{config:{fields:[{name:\"_id\",type:\"string\"},{name:\"accessLayer\",type:\"int\"},{name:\"description\",type:\"string\"},{name:\"fileName\",type:\"string\"},{name:\"owner\",type:\"string\"},{name:\"title\",type:\"string\"},{name:\"type\",type:\"string\"},{name:\"uploadDate\",type:\"date\"}]}},0,0,0,0,0,0,[DL.model,\"Documents",583920,32,"XTitlebar\",Ext.TitleBar,{me:this,",574644,593,"idden:true",575235,72,"3",575308,148,"3",575457,93,",{xtype:\"button\",cls:\"logout-btn\",itemId:\"logout-btn\",scope:this,width:\"3",575308,33,"gnome-logout-icone-3872-128.png\",hidden:true",575549,298,"login-btn\").setHidden(!this.getHiddenEl()",575833,37,"idden(this.getHiddenEl());this.down(\"#logout-btn\").setHidden(this.getHiddenEl());this.down(\"#user-document-btn\").setHidden(this.getHiddenEl()",575833,329,",getHiddenEl:function(){var a=localStorage.getItem(\"userData\");if(a",444662,33,576162,231,583984,90,"width:\"100%\",height:\"90%\",flex:1,left:0,top:\"10%\",right:0,cls:\"news-container\",items:[{xtype:\"dataview\",store:\"documents\",itemId:\"news-list\",height:\"100%\",flex:1,cls:\"news-list\",itemTpl:new Ext.XTemplate('<div class=\"news-item\"><div class=\"main-cont\"><div class=\"news\">{owner} \\u043",586223,53,"32 \\u0444\\u0430\\u0439\\u043b {fileName}</div>','<div class=\"download\"></div>',\"</div>\",'<div class=\"description\"> {description}</div>',\"</div>\",{getDate:function(a){}})}],listeners:[{delegate:\"div.download\",element:\"element\",event:\"tap\",fn:function(c,g,b,f,a){var d=Ext.get(c.delegatedTarget.parentElement);this.fireEvent(\"downloadDocument\")}},{delegate:\"div.news\",element:\"element\",event:\"tap\",fn:function(d,h,c,g,b){var f=Ext.get(d.delegatedTarget.parentElement);var a=f.dom.nextElementSibling.getAttribute(\"style\",\"display\");if(a==\"display:block\"){f.dom.nextElementSibling.setAttribute(\"style\",\"display:none\")}else{f.dom.nextElementSibling.setAttribute(\"style\",\"display:block\")}}",586670,34,"callParent()",576393,243,"},itemId:\"main\",width:\"100%\",height:\"100%\",flex:1",576677,250,577761,485,578362,3408,"e,g,i,h,b,d,f){var c={name:a,surname:e,email:g,password:i,birthday:h,status:b,role:d,sex:f};this.fireEvent(\"submitRegistrationForm\",c",582074,185,"d",582260,38,"f",582299,36,"h",589003,35,"var i",582418,44,"g",582463,75,"e",582539,84,"f!=\"\"&&this.validateEmail(f)){",582861,208,"h!=\"\"&&h!=i",583080,210,"d",583291,36,"d,f,h,g,c,e",583338,609,"controller.RegistrationForm\",Ext.app.Controller,{config:{refs:{registrationForm:{xtype:\"registration-form\",selector:\"registration-form\",autoCreate:true}},control:{registrationForm:{submitRegistrationForm:\"sendRegistrationRequest\"}}},sendRegistrationRequest:function(b){var a",581790,43,"/signup\",params:{password:b.password,firstName:b.name,secondName:b.surname,email:b.email,role:b.role,status:b.status,sex:b.sex,birthDay:b.birthday",589130,64,"}},0,0,0,0,0,0,[DL.controller",583902,50,"Search",587868,48,584011,63,"flex:1,maxWidth:\"24",584086,46,"cls:\"search",584147,32,"container\",layout:\"hbox\",cls:\"date-container\",items:[{xtype:\"container\",cls:\"title\",width:\"30%\",html:\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u0442\\u0432\\u043e\\u0440\\u0435\\u043d\\u043d\\u044f\"",580193,35,"width:\"70%\",items:[",580377,33,"date-create-from\",cls:\"date-create-from\",label:\"\\u0432\\u0456\\u0434\",picker:{yearFrom:201",580440,50,"new Date(new Date().setMonth(new Date().getMonth()-1)).setHours(0,0,0))",580375,35,"date-create-to\",cls:\"date-create-to\",label:\"\\u0434\\u043e\",picker:{yearFrom:201",580440,65,"textfield",585725,51,584745,54,"0\",labelWidth:\"30%",578685,63," \\u043",585739,37,"\\u0430\",itemId:\"owner\",cls:\"title owner\"",585197,34,"layout:\"hbox\",cls:\"document-type\",items:[{xtype:\"container\",cls:\"title\",width:\"30%\",html:\"\\u0422\\u0438\\u043f",584745,54,"0",585405,34,"cls:\"types\",layout:\"vbox",585437,44,"60%\",value:0,itemId:\"trainingMaterials\",label",584556,112,585792,37,"60%\",value:1,itemId:\"regulations\",label",584683,118,585792,37,"60%\",value:2,itemId:\"minutesOfMeetings\",label",584816,106,585792,37,"60%\",value:3,itemId:\"informationMaterials\",label",584937,130,585792,37,"60%\",value:4,itemId:\"advertisement\",label",585082,63,"}]",588224,37,"width:\"100%",586129,45,"cls:\"search-btn\",itemId:\"search-btn\",text",574926,34,"width:\"35%\",handler:\"advancedSearch\"},{xtype:\"spacer\",width:\"28%",580717,95,"lose-search-panel-btn\",width:\"35%\"",586668,36,"dateFrom=new Date();this.dateTo=new Date(new Date(new Date().setMonth(new Date().getMonth()-1)).setHours(0,0,0));this.down(\"#search",575712,34,"search-btn\").setHandler(this.advancedSearch);this.callParent()},advancedSearch:function(){var f=this.down(\"#date-create-from",582241,32,"date-create-to",582555,32,"owner\").getValue();var d=this.getType();var c={owner:b,type:d};var a={from:f,to:e};this.fireEvent(\"sendAdvancedSearch\",c,a)},getType:function(){var a=[];if(this.down(\"#trainingMaterials\").getChecked()){a.push(this.down(\"#trainingMaterials\").getValue())}if(this.down(\"#regulations\").getChecked()){a.push(this.down(\"#regulations\").getValue())}if(this.down(\"#minutesOfMeetings\").getChecked()){a.push(this.down(\"#minutesOfMeetings\").getValue())}if(this.down(\"#informationMaterials\").getChecked()){a.push(this.down(\"#informationMaterials\").getValue())}if(this.down(\"#advertisement\").getChecked()){a.push(this.down(\"#advertisement\").getValue())}return a}},0,[\"search-document-",277950,40,",\"search-document-",277984,49,",\"search-document-panel\":true},[\"widget.search-document-panel\"],0,[DL.view",539736,32,"DL.controller.Search\",Ext.app.Controller,{config:{refs:{searchPanel:{xtype:\"search-document-panel\",selector:\"search-document-panel\",autoCreate:true},closeSearchPanelBtn:\"component[itemId=close-search-panel-btn]\",titlebar:{xtype:\"xtitlebar\",selector:\"xtitlebar\",autoCreate:true},searchField:\"xtitlebar component[itemId= documentSearch]\"},control:{searchPanel:{sendAdvancedSearch:\"searchByTags\"},closeSearchPanelBtn:{tap:\"closeSearchPanel\"},searchField:{focus:\"openAdvancedSearch\",action:\"searchByName\"}}},searchByName:function(){this.dateFrom=new Date();this.dateTo=new Date(new Date(new Date().setMonth(new Date().getMonth()-1)).setHours(0,0,0));var a={from:this.dateTo,to:this.dateFrom};var b=this.getSearchField().getValue();var c=Ext.Ajax.request({method:\"GET\",url:\"/getDocuments\",params:{name:b,tags:null,timePeriod:a},success:function(d){var e=d",589159,35,"},searchByTags:function(c,a){var b=this.getSearchField(",589025,39,"GET\",url:\"/getDocuments\",params:{name:b,tags:c,timePeriod:a},success:function(d){var e=d",589159,35,"},closeSearchPanel:function(){this.searchPanel.setHidden(true)},openAdvancedSearch:function(){if(!this.searchPanel){this.searchPanel=Ext.create(\"DL.view.Search\");this.searchPanel.showBy(this.getSearchField())}else{this.searchPanel.setHidden(false)}}},0,0,0,0,0,0,[DL.controller,\"Search",583920,755,"0",584676,132,"1",584809,120,"2",584930,144,"3",585075,77,"4",585153,41,"5",585195,200,"itemId:\"access-layer-",585388,114,"value:0",585501,128,"value:1",585628,150,"value:2",585777,84,"value:3",585860,32,"container\",width:\"100%\",layout:\"hbox\",hidden:false,itemId:\"upload-file-container\",items:[{xtype:\"panel\",width:\"60%\",cls:\"file-name\",itemId:\"file-name\",html:\"\\u0424\\u0430\\u0439\\u043b \\u043d\\u0435 \\u0432\\u0438\\u0431\\u0440\\u0430\\u043d\\u0438\\u0439\"},{xtype:\"button\",t",585969,80,"cls:\"take-file-btn\",itemId:\"take-file-btn\",handler:\"onAttachFile\",scope:this,width:\"39%\"",585882,167,"hidden:true",588224,37,586131,573,"screenshot=null;",586699,242,"closedBtn=this.down(\"#close-btn\");this.workerAcces",586951,40,586990,72,"s=this.down(\"#allUsers\");this.takeFileBtn=this.down(\"#take-file-btn\");this.accessTitle=this.down(\"#access-layer-title\");this.fileName=this.down(\"#file-name\");this.fileContainer=this.down(\"#upload-file-container\");this.takeFileBtn.setScope(this);this.takeFileBtn.setHandler(this.onAttachFile",587084,147,"losedBtn.on(\"tap\",this.closeAddDocumentBtn,this);this.callParent()},onAttachFile:function(){var a=",587553,35,";var b=this;a.addEventListener(\"change\",function(d){var c=this,f=d;b.handleFileUpload(f,c)},false);a.click();console.log(\"Creating screenshot\")},handleFileUpload:function(f,d){var e=this;var b=d.files;if(b.length>0){var c=b[0];var a=new FileReader();a.onload=function(h){var g=h.target.result;e.screenshot=g;e.fileName.setHtml(e",587557,37,")};a.readAsDataURL(c)}",587242,38,"4){this.fileContainer.setHidden(true)}else{this.fileContainer.setHidden(fals",587315,118,587432,37,587468,66,"s.setChecked(false);this.fileName.setHtml(\"\\u0424\\u0430\\u0439\\u043b \\u043d\\u0435 \\u0432\\u0438\\u0431\\u0440\\u0430\\u043d\\u0438\\u0439\")},onUploadBtn:function(){var a=this.name.getValue();var k=this.description.getValue();var j=this.type.getValue();var h=this.workerAccess.getChecked();var f=this.studentAccess.getChecked();var c=this.owner.getChecked();var b=this.allUserAccess.getChecked();var e=this.screenshot;var i=false;var d=[];if(!a){this.name.addCls(\"error\");i=true}else{this.name.element.removeCls(\"error\");this.name.removeCls(\"error\")}if(!k){this.description.addCls(\"error\");i=true}else{this.description.element.removeCls(\"error\");this.description.removeCls(\"error\")}if(h||f||c||b){this.accessTitle.element.removeCls(\"error\");this.accessTitle.removeCls(\"error\");d=this.getAccessValue()}else{this.accessTitle.addCls(\"error\");i=true}if(!this.fileContainer.getHidden()){if(!e){this.fileName.addCls(\"error\");i=true}else{this.fileName.element.removeCls(\"error\");this.fileName.removeCls(\"error\")}}if(!i){var g={name:a,description:k,type:j,access:d,file:e};this.fireEvent(\"uploadNewFile\",g)}},getAccessValue:function(){var a=[];if(this.workerAccess.getChecked()){a.push(this.workerAccess.getValue())}if(this.studentAccess.getChecked()){a.push(this.studentAccess.getValue())}if(this.owner.getChecked()){a.push(this.owner.getValue())}if(this.allUserAccess.getChecked()){a.push(this.allUserAccess.getValue())}return a},closeAddDocumentBtn:function(){this.destroy()",587622,232,"controller.AddDocument\",Ext.app.Controller,{config:{refs:{addDocumentPanel:{xtype:\"add-document-panel\",selector:\"add-document-panel\",autoCreate:true},uploadNewDocumentBtn:\"add-document-panel component[itemId=upload-btn]\"},control:{addDocumentPanel:{uploadNewFile:\"uploadNewDocument\"}}},uploadNewDocument:function(f){var c=localStorage.getItem(\"userData\");if(c){var b=c.split('\"');var a=b.indexOf(\"lastLame\");var d=b[a+2];var e=b.indexOf(\"title\");var g=b[e+2]}",589038,37,"/api/document\",params:{fileName:f.name,owner:d,description:f.description,type:f.type,accessLayer:f.accessValue,binaryFile:f.file,title:g},success:function(h){var j=h.responseText;var i=JSON.parse(j)},error:function(){}})}},0,0,0,0,0,0,[DL.controller",587814,323,",value:\"jcooper@lajo.m",588134,90,",value:\"JXSVo8EeD",588223,742,"d",582299,36,"c",589003,35,"var a=this.down(\"#email\");var e=this.down(\"#password\");var b=false;if(d!=\"\"){if(d!=\"\"&&!this.validateEmail(d)){a.addCls(\"error\");b=true}else{if(a.element.hasCls(\"error\")){a.element.removeCls(\"error\");a.removeCls(\"error\")}}}else{a.addCls(\"error\");b=true}if(c==\"\"){e.addCls(\"error\");b=true}else{if(e.element.hasCls(\"error\")){e.element.removeCls(\"error\");e.removeCls(\"error\")}}if(!b){this.fireEvent(\"sendLoginForm\",d,c)}",582075,81,589229,271,589512,41,277984,39,"\"login-form\"",589631,38,"],0,[DL.view,\"Logi",583915,32,"controller.Login\",Ext.app.Controller,{config:{refs:{loginPanel:{xtype:\"login-form\",selector:\"login-form\",autoCreate:true},submitSearchPanelBtn:\"login-form component[itemId=submit-btn]\",loginBtn:\"xtitlebar component[itemId=login-btn]\",logoutBtn:\"xtitlebar component[itemId=logout-btn]\",newDocumentBtn:\"xtitlebar component[itemId= add-document-btn]\",userDocumentBtn:\"xtitlebar component[itemId=user-document-btn]\"},control:{loginPanel:{sendLoginForm:\"sendLoginRequest\"},logoutBtn:{tap:\"logoutUser\"}}},sendLoginRequest:function(b,a){var c",581790,43,589096,53,"d){var e=d.responseText;c.loginUser(e)},error:function(){}})},loginUser:function(c){var a=c.split('\"');for(var b=0;b<a.length;b++){if(a[b]==\"No user found.\"){return}}this.userData=JSON.parse(c);localStorage.setItem(\"userData\",c);this.getLoginBtn().setHidden(true);this.getNewDocumentBtn().setHidden(false);this.getUserDocumentBtn().setHidden(false);this.getLogoutBtn().setHidden(false);this.getLoginPanel().destroy();this.loadDocuments()},logoutUser:function(){var a",581790,32,"GET\",url:\"/logout\",params:{},success:function(b){var c=b.responseText;a.getLoginBtn().setHidden(false);a.getNewDocumentBtn().setHidden(true);a.getUserDocumentBtn().setHidden(true);a.getLogoutBtn().setHidden(true);localStorage.removeItem(\"userData\")},error:function(){}})},loadDocuments:function(){var b=this.userData._id;var a={from:new Date(new Date(new Date().setMonth(new Date().getMonth()-1)).setHours(0,0,0)),to:new Date()};Ext.Ajax.request({method:\"GET\",url:\"/api/documents\",params:{title:null,userId:b,tags:null,timePeriod:a",589130,42,";this.documents=JSON.parse(d);this.updateMainPage()},error:function(){}})},updateMainPage:function(){}},0,0,0,0,0,0,[DL.controller,\"Login\"],0));(Ext.cmd.derive(\"DL.store.Documents\",Ext.data.Store,{model:\"DL.model.Documents\",autoLoad:false,storeId:\"documents\",autoSync:true},0,0,0,0,0,0,[DL.store,\"Documents\"],0));(Ext.cmd.derive(\"DL.controller.News\",Ext.app.Controller,{config:{refs:{newsContainer:{xtype:\"news-container\",selector:\"news-container\",autoCreate:true},newsList:\"news-container component[itemId=news-list]\"},control:{newsContainer:{initialize:\"onInitialize\"}}},onInitialize:function(){var b=this;var a={from:new Date(new Date(new Date().setMonth(new Date().getMonth()-1)).setHours(0,0,0)),to:new Date()};Ext.Ajax.request({method:\"GET\",url:\"/api/documents\",params:{title:null,userId:null,tags:null,timePeriod:a",589130,42,";b.documents=JSON.parse(d);b.updateMainPage()},error:function(){}})},updateMainPage:function(){var a=Ext.getStore(\"documents\");console.log(\"Store is \",a);a.setData(this.documents);this.getNewsList().refresh()}},0,0,0,0,0,0,[DL.controller,\"News\"],0));Ext.Loader.setConfig({disableCaching:false}",576925,70,",\"XTitlebar\",\"LoginForm\",\"RegistrationForm\",\"AddDocument\",\"Search\",\"News\"],controllers:[\"RegistrationForm\",\"Search\",\"AddDocument\",\"Login\",\"News\"],stores:[\"DL.store.Documents\"],models:[\"Documents",576994,767]